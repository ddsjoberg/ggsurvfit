<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Flexible Time-to-Event Figures • ggsurvfit</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Atkinson_Hyperlegible-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Flexible Time-to-Event Figures">
<meta name="description" content="Ease the creation of time-to-event (i.e. survival) endpoint figures. The modular functions create figures ready for publication. Each of the functions that add to or modify the figure are written as proper ggplot2 geoms or stat methods, allowing the functions from this package to be combined with any function or customization from ggplot2 and other ggplot2 extension packages.">
<meta property="og:description" content="Ease the creation of time-to-event (i.e. survival) endpoint figures. The modular functions create figures ready for publication. Each of the functions that add to or modify the figure are written as proper ggplot2 geoms or stat methods, allowing the functions from this package to be combined with any function or customization from ggplot2 and other ggplot2 extension packages.">
<meta property="og:image" content="http://www.danieldsjoberg.com/ggsurvfit/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ggsurvfit</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/gallery.html">Gallery</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/themes.html">Themes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/ggsurvfit/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="ggsurvfit-">ggsurvfit 
<a class="anchor" aria-label="anchor" href="#ggsurvfit-"></a>
</h1>
</div>
<!-- badges: start -->

<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>ggsurvfit</strong> package eases the creation of time-to-event (aka survival) summary figures with ggplot2. The concise and modular code creates images that are ready for publication or sharing. Competing risks cumulative incidence is also supported via <code><a href="reference/ggcuminc.html">ggcuminc()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="why-ggsurvfit">Why ggsurvfit?<a class="anchor" aria-label="anchor" href="#why-ggsurvfit"></a>
</h2>
<ul>
<li><p><strong>Use ggplot2 functions:</strong> Each <strong>ggsurvfit</strong> add-on function (e.g. <code><a href="reference/add_confidence_interval.html">add_confidence_interval()</a></code>, <code><a href="reference/add_risktable.html">add_risktable()</a></code>, etc.) is written as a proper ggplot2 <a href="https://ggplot2.tidyverse.org/reference/index.html" class="external-link">‘geom’</a>, meaning the package functions can be woven with ggplot2 functions seamlessly. You don’t need to learn how to style the plot within the ggsurvfit functions: rather, rely on the suite of ggplot2 functions you already know.</p></li>
<li><p><strong>Publishable Legends:</strong> Raw variable names do not appear in the figure legend, e.g. <code>"sex=Female"</code>.</p></li>
<li><p><strong>Limitless Customization:</strong> You can modify the x-axis scales or any other plot feature and the risk table will still align with the plot.</p></li>
<li><p><strong>Simple Saving:</strong> Save individual images easily with <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggplot2::ggsave()</a></code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install <strong>ggsurvfit</strong> from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ggsurvfit"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version from <a href="https://github.com/pharmaverse/ggsurvfit" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"pharmaverse/ggsurvfit"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>Review the <a href="https://www.danieldsjoberg.com/ggsurvfit/articles/gallery.html" class="external-link"><strong>figure gallery</strong></a> for many more examples.</p>
<p>The code below constructs a basic {ggsurvfit} figure without customization.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pharmaverse/ggsurvfit" class="external-link">ggsurvfit</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/survfit2.html">survfit2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">surg</span>, data <span class="op">=</span> <span class="va">df_colon</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/ggsurvfit.html">ggsurvfit</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/add_confidence_interval.html">add_confidence_interval</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/add_risktable.html">add_risktable</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/add_quantile.html">add_quantile</a></span><span class="op">(</span>y_value <span class="op">=</span> <span class="fl">0.6</span>, color <span class="op">=</span> <span class="st">"gray50"</span>, linewidth <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/scale_ggsurvfit.html">scale_ggsurvfit</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Any figure created with {ggsurvfit} can be customized using {ggplot2} functions.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="co"># limit plot to show 8 years and less</span></span>
<span>  <span class="fu">coord_cartesian</span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># update figure labels/titles</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    y <span class="op">=</span> <span class="st">"Percentage Survival"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Recurrence by Time From Surgery to Randomization"</span>,</span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-2-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="survfit2-vs-survfit">
<code>survfit2()</code> vs <code>survfit()</code>
<a class="anchor" aria-label="anchor" href="#survfit2-vs-survfit"></a>
</h2>
<p>Both functions have identical inputs, so why do we need <code><a href="reference/survfit2.html">survfit2()</a></code>? The <code><a href="reference/survfit2.html">survfit2()</a></code> tracks the environment from which the function was called, resulting in the following benefits.</p>
<ul>
<li>We can reliably remove the raw variable names from the figure legend, e.g. <code>SEX=Female</code>.</li>
<li>P-values can be calculated with <code>survfit_p()</code> and added to figures.</li>
<li>The items above are often <em>possible</em> using <code><a href="https://rdrr.io/pkg/survival/man/survfit.html" class="external-link">survfit()</a></code>. However, by utilizing the calling <a href="https://adv-r.hadley.nz/environments.html" class="external-link">environment</a> we are assured the correct elements are found, rather than crossing our fingers that the search path contains the needed elements.</li>
</ul>
</div>
<div class="section level2">
<h2 id="cdisc-adam-adtte">CDISC ADaM ADTTE<a class="anchor" aria-label="anchor" href="#cdisc-adam-adtte"></a>
</h2>
<p>The package also includes gems for those using the <a href="https://www.cdisc.org/standards/foundational/adam/adam-basic-data-structure-bds-time-event-tte-analyses-v1-0" class="external-link">CDISC ADaM ADTTE v1.0</a> data model.</p>
<p>If columns <code>"PARAM"</code> or <code>"PARAMCD"</code> are present in the data frame passed to <code><a href="reference/survfit2.html">survfit2()</a></code>, their values will be used to construct default labels in the <code><a href="reference/ggsurvfit.html">ggsurvfit()</a></code> figure.</p>
<p>The event indicator in ADTTE data sets is named <code>"CNSR"</code> and is coded in the opposite way the survival package expects outcomes—<code>1 = 'censored'</code> and <code>0 = 'event'</code>. This difference creates an opportunity for errors to be introduced in an analysis. The <strong>ggsurvfit</strong> package exports a function called <code><a href="reference/Surv_CNSR.html">Surv_CNSR()</a></code> to resolve this concern. The function creates a survival object (e.g. <code><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">survival::Surv()</a></code>) that uses CDISC ADaM ADTTE coding conventions as the default values. The function can be used in <strong>ggsurvfit</strong> as well as any other package that uses <code><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">survival::Surv()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html" class="external-link">survfit</a></span><span class="op">(</span><span class="fu"><a href="reference/Surv_CNSR.html">Surv_CNSR</a></span><span class="op">(</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, <span class="va">adtte</span><span class="op">)</span></span>
<span><span class="co">#&gt; Call: survfit(formula = Surv_CNSR() ~ 1, data = adtte)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         n events median 0.95LCL 0.95UCL</span></span>
<span><span class="co">#&gt; [1,] 2199    755    3.2     3.1    3.56</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="related-packages">Related Packages<a class="anchor" aria-label="anchor" href="#related-packages"></a>
</h2>
<p><img src="reference/figures/README-gt-related-pkgs.png" width="100%"></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=ggsurvfit" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/pharmaverse/ggsurvfit/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/pharmaverse/ggsurvfit/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ggsurvfit</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.danieldsjoberg.com/" class="external-link">Daniel D. Sjoberg</a> <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-0862-2018" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://graphicsprinciples.github.io/" class="external-link">Mark Baillie</a> <br><small class="roles"> Author </small>   </li>
<li>Charlotta Fruechtenicht <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6689-6423" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Steven Haesendonckx <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8222-3686" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Tim Treis <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9686-4799" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.danieldsjoberg.com/" class="external-link">Daniel D. Sjoberg</a>, <a href="https://graphicsprinciples.github.io/" class="external-link">Mark Baillie</a>, Charlotta Fruechtenicht, Steven Haesendonckx, Tim Treis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
